@main("import - ECOL", true) {

    <h2>Import sensor data</h2>
    @helper.form(action = routes.Application.importData, 'enctype -> "multipart/form-data") {
        <div class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="inputAddressFile">Address file</label>
                <div class="controls">
                    <input type="file" id="inputAddressFile" name="addressFile">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="inputDataFile">Data file</label>
                <div class="controls">
                    <input type="file" id="inputDataFile" name="dataFile">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="selectDataType">Data type</label>
                <div class="controls">
                    <select id="selectDataType" name="dataType">
                        <option value="temperature">Temperature</option>
                        <option value="compass">Compass</option>
                        <option value="gps">GPS</option>
                        <option value="radiometer">Radiometer</option>
                        <option value="wind">Wind</option>
                        <option value="point_of_interest">Point of interest</option>
                    </select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="selectDataType">Mission</label>
                <div class="controls">
                    <span id="missionSelectPlaceholder"></span>
                </div>
            </div>
            <script>
                var config = new Config();
                $().ready(function() {
                    $.ajax({
                        url: config.get('URL_PREFIX') +"/api/missiondates"
                    }).done(function( jsonData ) {
                        createMissionSelect(jsonData);
                    });
                })
                function createMissionSelect(missions) {
                    var options = "<option value=0>Select a trajectory</option>"; // default value
                    for (var i = 0; i < missions.length; i++) {
                        mission = missions[i];
                        var missionName = mission.departuretime + " - " + mission.vehicle
                        options += "<option value="+ mission.id +">"+ missionName +"</option>"
                    }

                    var pathSelect = "<select id=\"pathSelect\" name=\"missionId\">" + options + "</select>";
                    $('#missionSelectPlaceholder').html(pathSelect);
                }
            </script>
            <div class="control-group">
                <div class="controls">
                    <button type="submit" class="btn">Import</button>
                </div>
            </div>
        </div>
    }

}